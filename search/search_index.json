{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Spotify ETL Pipeline Documentation","text":"<p>Welcome to the Spotify ETL Pipeline documentation! This project provides a complete solution for extracting data from Spotify API, transforming it, and loading it into BigQuery for analysis.</p> <p>Note: This documentation is automatically deployed via GitHub Actions.</p>"},{"location":"#overview","title":"Overview","text":"<p>The Spotify ETL Pipeline is designed to:</p> <ul> <li>Extract data from Spotify Web API (user profile, playlists, tracks, artists, audio features)</li> <li>Transform and validate data using Pydantic models</li> <li>Load data into BigQuery with optimized schemas and incremental updates</li> <li>Visualize data through an interactive Streamlit dashboard</li> <li>Optimize costs to stay within BigQuery's free tier limits</li> </ul>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>\ud83d\udd10 OAuth2 Authentication with Spotify API</li> <li>\ud83d\udcca Comprehensive Data Extraction from multiple Spotify endpoints</li> <li>\u2705 Data Validation using Pydantic models</li> <li>\ud83d\ude80 Efficient BigQuery Loading with upsert/incremental strategies</li> <li>\ud83d\udcc8 Interactive Dashboard with Streamlit</li> <li>\ud83d\udcb0 Cost Optimization to maintain free tier usage</li> <li>\ud83d\udcda Complete Documentation with MkDocs</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<ol> <li> <p>Install dependencies:    <pre><code>pip install -r requirements.txt\n</code></pre></p> </li> <li> <p>Configure environment:    <pre><code>cp .env.example .env\n# Edit .env with your credentials\n</code></pre></p> </li> <li> <p>Setup BigQuery:    <pre><code>python scripts/setup_bigquery.py\n</code></pre></p> </li> <li> <p>Run ETL Pipeline:    <pre><code>python scripts/run_etl.py\n</code></pre></p> </li> <li> <p>Launch Dashboard:    <pre><code>streamlit run streamlit_app/main.py\n</code></pre></p> </li> </ol>"},{"location":"#project-structure","title":"Project Structure","text":"<pre><code>Spotify-api/\n\u251c\u2500\u2500 config/              # Configuration and schemas\n\u251c\u2500\u2500 src/                 # Source code\n\u2502   \u251c\u2500\u2500 spotify/        # Spotify API client and extractors\n\u2502   \u251c\u2500\u2500 bigquery/       # BigQuery client and loader\n\u2502   \u2514\u2500\u2500 utils/          # Utilities (logging, validators)\n\u251c\u2500\u2500 pipelines/          # ETL pipelines\n\u251c\u2500\u2500 streamlit_app/      # Streamlit dashboard\n\u251c\u2500\u2500 tests/              # Unit tests\n\u251c\u2500\u2500 scripts/            # Executable scripts\n\u2514\u2500\u2500 docs/               # Documentation\n</code></pre>"},{"location":"#documentation-sections","title":"Documentation Sections","text":"<ul> <li>Getting Started - Installation and setup guide</li> <li>Architecture - System architecture and design</li> <li>API Reference - Code documentation</li> <li>Spotify API Guide - Spotify API endpoints and usage</li> <li>Deployment - Deployment and cost monitoring</li> </ul>"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python 3.11+</li> <li>Spotify Developer Account (Client ID and Secret)</li> <li>Google Cloud Platform account with BigQuery enabled</li> <li>GCP Service Account credentials (JSON file)</li> </ul>"},{"location":"#cost-optimization","title":"Cost Optimization","text":"<p>This project is designed to operate within BigQuery's free tier:</p> <ul> <li>10 GB of storage per month (free)</li> <li>1 TB of queries per month (free)</li> </ul> <p>See Deployment Guide for cost monitoring and optimization strategies.</p>"},{"location":"#license","title":"License","text":"<p>MIT License</p>"},{"location":"#contributing","title":"Contributing","text":"<p>Contributions are welcome! Please feel free to submit a Pull Request.</p>"},{"location":"api-reference/","title":"API Reference","text":"<p>Complete API documentation for the Spotify ETL Pipeline.</p>"},{"location":"api-reference/#configuration","title":"Configuration","text":""},{"location":"api-reference/#settings-configsettingspy","title":"Settings (<code>config/settings.py</code>)","text":"<p>Centralized configuration management using Pydantic.</p>"},{"location":"api-reference/#settings","title":"<code>Settings</code>","text":"<p>Main settings class that aggregates all configuration.</p> <p>Attributes: - <code>spotify</code>: SpotifySettings - <code>bigquery</code>: BigQuerySettings - <code>limits</code>: ExtractionLimits - <code>app</code>: AppSettings</p> <p>Properties: - <code>extraction_limits</code>: Returns extraction limits as dictionary</p>"},{"location":"api-reference/#spotify-module","title":"Spotify Module","text":""},{"location":"api-reference/#spotifyclient-srcspotifyclientpy","title":"SpotifyClient (<code>src/spotify/client.py</code>)","text":"<p>Client for interacting with Spotify Web API.</p>"},{"location":"api-reference/#methods","title":"Methods","text":""},{"location":"api-reference/#get_current_user-dict","title":"<code>get_current_user() -&gt; dict</code>","text":"<p>Get current user profile.</p> <p>Returns: User profile information</p>"},{"location":"api-reference/#get_user_playlistsuser_id-str-limit-int-50-list","title":"<code>get_user_playlists(user_id: str, limit: int = 50) -&gt; list</code>","text":"<p>Get user playlists with pagination.</p> <p>Parameters: - <code>user_id</code>: Spotify user ID - <code>limit</code>: Maximum number of playlists per page</p> <p>Returns: List of playlists</p>"},{"location":"api-reference/#get_playlist_tracksplaylist_id-str-limit-int-100-list","title":"<code>get_playlist_tracks(playlist_id: str, limit: int = 100) -&gt; list</code>","text":"<p>Get tracks from a playlist with pagination.</p> <p>Parameters: - <code>playlist_id</code>: Spotify playlist ID - <code>limit</code>: Maximum number of tracks per page</p> <p>Returns: List of tracks</p>"},{"location":"api-reference/#get_track_audio_featurestrack_ids-list-list","title":"<code>get_track_audio_features(track_ids: list) -&gt; list</code>","text":"<p>Get audio features for multiple tracks.</p> <p>Parameters: - <code>track_ids</code>: List of track IDs (max 100 per request)</p> <p>Returns: List of audio features</p>"},{"location":"api-reference/#get_artistartist_id-str-dict","title":"<code>get_artist(artist_id: str) -&gt; dict</code>","text":"<p>Get artist information.</p> <p>Parameters: - <code>artist_id</code>: Spotify artist ID</p> <p>Returns: Artist information</p>"},{"location":"api-reference/#get_artistsartist_ids-list-list","title":"<code>get_artists(artist_ids: list) -&gt; list</code>","text":"<p>Get multiple artists information.</p> <p>Parameters: - <code>artist_ids</code>: List of artist IDs (max 50 per request)</p> <p>Returns: List of artist information</p>"},{"location":"api-reference/#get_recently_playedlimit-int-50-list","title":"<code>get_recently_played(limit: int = 50) -&gt; list</code>","text":"<p>Get recently played tracks.</p> <p>Parameters: - <code>limit</code>: Maximum number of tracks (max 50)</p> <p>Returns: List of recently played tracks</p>"},{"location":"api-reference/#get_top_trackstime_range-str-medium_term-limit-int-20-list","title":"<code>get_top_tracks(time_range: str = \"medium_term\", limit: int = 20) -&gt; list</code>","text":"<p>Get user's top tracks.</p> <p>Parameters: - <code>time_range</code>: Time range (short_term, medium_term, long_term) - <code>limit</code>: Maximum number of tracks (max 50)</p> <p>Returns: List of top tracks</p>"},{"location":"api-reference/#get_top_artiststime_range-str-medium_term-limit-int-20-list","title":"<code>get_top_artists(time_range: str = \"medium_term\", limit: int = 20) -&gt; list</code>","text":"<p>Get user's top artists.</p> <p>Parameters: - <code>time_range</code>: Time range (short_term, medium_term, long_term) - <code>limit</code>: Maximum number of artists (max 50)</p> <p>Returns: List of top artists</p>"},{"location":"api-reference/#spotifyextractor-srcspotifyextractorpy","title":"SpotifyExtractor (<code>src/spotify/extractor.py</code>)","text":"<p>Extract data from Spotify API with limits applied.</p>"},{"location":"api-reference/#methods_1","title":"Methods","text":""},{"location":"api-reference/#extract_user_profile-dict","title":"<code>extract_user_profile() -&gt; dict</code>","text":"<p>Extract current user profile.</p> <p>Returns: User profile data</p>"},{"location":"api-reference/#extract_playlistsuser_id-str-listdict","title":"<code>extract_playlists(user_id: str) -&gt; List[dict]</code>","text":"<p>Extract user playlists (limited by MAX_PLAYLISTS).</p> <p>Parameters: - <code>user_id</code>: Spotify user ID</p> <p>Returns: List of playlists</p>"},{"location":"api-reference/#extract_playlist_tracksplaylist_id-str-listdict","title":"<code>extract_playlist_tracks(playlist_id: str) -&gt; List[dict]</code>","text":"<p>Extract tracks from a playlist (limited by MAX_TRACKS_PER_PLAYLIST).</p> <p>Parameters: - <code>playlist_id</code>: Playlist ID</p> <p>Returns: List of playlist tracks</p>"},{"location":"api-reference/#extract_tracksplaylist_tracks-listdict-listdict","title":"<code>extract_tracks(playlist_tracks: List[dict]) -&gt; List[dict]</code>","text":"<p>Extract track information from playlist tracks.</p> <p>Parameters: - <code>playlist_tracks</code>: List of playlist track items</p> <p>Returns: List of track data</p>"},{"location":"api-reference/#extract_audio_featurestrack_ids-liststr-listdict","title":"<code>extract_audio_features(track_ids: List[str]) -&gt; List[dict]</code>","text":"<p>Extract audio features for tracks (batched).</p> <p>Parameters: - <code>track_ids</code>: List of track IDs</p> <p>Returns: List of audio features</p>"},{"location":"api-reference/#extract_artistsartist_ids-liststr-listdict","title":"<code>extract_artists(artist_ids: List[str]) -&gt; List[dict]</code>","text":"<p>Extract artist information.</p> <p>Parameters: - <code>artist_ids</code>: List of artist IDs</p> <p>Returns: List of artist data</p>"},{"location":"api-reference/#extract_recently_played-listdict","title":"<code>extract_recently_played() -&gt; List[dict]</code>","text":"<p>Extract recently played tracks (limited by MAX_RECENTLY_PLAYED).</p> <p>Returns: List of recently played tracks</p>"},{"location":"api-reference/#extract_top_tracks-listdict","title":"<code>extract_top_tracks() -&gt; List[dict]</code>","text":"<p>Extract top tracks for all time ranges (limited by TOP_ITEMS_LIMIT).</p> <p>Returns: List of top tracks</p>"},{"location":"api-reference/#extract_top_artists-listdict","title":"<code>extract_top_artists() -&gt; List[dict]</code>","text":"<p>Extract top artists for all time ranges (limited by TOP_ITEMS_LIMIT).</p> <p>Returns: List of top artists</p>"},{"location":"api-reference/#extract_all-dict","title":"<code>extract_all() -&gt; dict</code>","text":"<p>Extract all available data from Spotify API.</p> <p>Returns: Dictionary containing all extracted data</p>"},{"location":"api-reference/#datatransformer-srcspotifytransformerspy","title":"DataTransformer (<code>src/spotify/transformers.py</code>)","text":"<p>Transform and validate Spotify data.</p>"},{"location":"api-reference/#methods_2","title":"Methods","text":""},{"location":"api-reference/#transform_useruser_data-dict-dict","title":"<code>transform_user(user_data: dict) -&gt; dict</code>","text":"<p>Transform user profile data.</p> <p>Parameters: - <code>user_data</code>: Raw user data from API</p> <p>Returns: Transformed user data</p>"},{"location":"api-reference/#transform_playlistplaylist_data-dict-dict","title":"<code>transform_playlist(playlist_data: dict) -&gt; dict</code>","text":"<p>Transform playlist data.</p> <p>Parameters: - <code>playlist_data</code>: Raw playlist data from API</p> <p>Returns: Transformed playlist data</p>"},{"location":"api-reference/#transform_tracktrack_data-dict-dict","title":"<code>transform_track(track_data: dict) -&gt; dict</code>","text":"<p>Transform track data.</p> <p>Parameters: - <code>track_data</code>: Raw track data from API</p> <p>Returns: Transformed track data</p>"},{"location":"api-reference/#transform_audio_featuresfeatures_data-dict-dict","title":"<code>transform_audio_features(features_data: dict) -&gt; dict</code>","text":"<p>Transform audio features data.</p> <p>Parameters: - <code>features_data</code>: Raw audio features from API</p> <p>Returns: Transformed audio features</p>"},{"location":"api-reference/#transform_artistartist_data-dict-dict","title":"<code>transform_artist(artist_data: dict) -&gt; dict</code>","text":"<p>Transform artist data.</p> <p>Parameters: - <code>artist_data</code>: Raw artist data from API</p> <p>Returns: Transformed artist data</p>"},{"location":"api-reference/#transform_allraw_data-dict-dict","title":"<code>transform_all(raw_data: dict) -&gt; dict</code>","text":"<p>Transform all extracted data.</p> <p>Parameters: - <code>raw_data</code>: Dictionary with all raw extracted data</p> <p>Returns: Dictionary with all transformed data</p>"},{"location":"api-reference/#bigquery-module","title":"BigQuery Module","text":""},{"location":"api-reference/#bigqueryclient-srcbigqueryclientpy","title":"BigQueryClient (<code>src/bigquery/client.py</code>)","text":"<p>Client for BigQuery operations.</p>"},{"location":"api-reference/#methods_3","title":"Methods","text":""},{"location":"api-reference/#ensure_dataset_exists-none","title":"<code>ensure_dataset_exists() -&gt; None</code>","text":"<p>Ensure the BigQuery dataset exists, create if it doesn't.</p>"},{"location":"api-reference/#create_tabletable_name-str-schema-list-partitioned_by-str-none-none","title":"<code>create_table(table_name: str, schema: list, partitioned_by: str = None) -&gt; None</code>","text":"<p>Create a BigQuery table with schema.</p> <p>Parameters: - <code>table_name</code>: Name of the table - <code>schema</code>: List of SchemaField objects - <code>partitioned_by</code>: Field name for partitioning (optional)</p>"},{"location":"api-reference/#bigqueryloader-srcbigqueryloaderpy","title":"BigQueryLoader (<code>src/bigquery/loader.py</code>)","text":"<p>Load data into BigQuery with upsert strategy.</p>"},{"location":"api-reference/#methods_4","title":"Methods","text":""},{"location":"api-reference/#load_usersusers-listdict-none","title":"<code>load_users(users: List[dict]) -&gt; None</code>","text":"<p>Load user data to BigQuery.</p> <p>Parameters: - <code>users</code>: List of user dictionaries</p>"},{"location":"api-reference/#load_playlistsplaylists-listdict-none","title":"<code>load_playlists(playlists: List[dict]) -&gt; None</code>","text":"<p>Load playlist data to BigQuery.</p> <p>Parameters: - <code>playlists</code>: List of playlist dictionaries</p>"},{"location":"api-reference/#load_trackstracks-listdict-none","title":"<code>load_tracks(tracks: List[dict]) -&gt; None</code>","text":"<p>Load track data to BigQuery.</p> <p>Parameters: - <code>tracks</code>: List of track dictionaries</p>"},{"location":"api-reference/#load_audio_featuresfeatures-listdict-none","title":"<code>load_audio_features(features: List[dict]) -&gt; None</code>","text":"<p>Load audio features to BigQuery.</p> <p>Parameters: - <code>features</code>: List of audio feature dictionaries</p>"},{"location":"api-reference/#load_artistsartists-listdict-none","title":"<code>load_artists(artists: List[dict]) -&gt; None</code>","text":"<p>Load artist data to BigQuery.</p> <p>Parameters: - <code>artists</code>: List of artist dictionaries</p>"},{"location":"api-reference/#load_playlist_tracksplaylist_tracks-listdict-none","title":"<code>load_playlist_tracks(playlist_tracks: List[dict]) -&gt; None</code>","text":"<p>Load playlist-track relationships to BigQuery.</p> <p>Parameters: - <code>playlist_tracks</code>: List of playlist-track relationship dictionaries</p>"},{"location":"api-reference/#load_recently_playedrecently_played-listdict-none","title":"<code>load_recently_played(recently_played: List[dict]) -&gt; None</code>","text":"<p>Load recently played tracks to BigQuery.</p> <p>Parameters: - <code>recently_played</code>: List of recently played track dictionaries</p>"},{"location":"api-reference/#load_top_trackstop_tracks-listdict-none","title":"<code>load_top_tracks(top_tracks: List[dict]) -&gt; None</code>","text":"<p>Load top tracks to BigQuery.</p> <p>Parameters: - <code>top_tracks</code>: List of top track dictionaries</p>"},{"location":"api-reference/#load_top_artiststop_artists-listdict-none","title":"<code>load_top_artists(top_artists: List[dict]) -&gt; None</code>","text":"<p>Load top artists to BigQuery.</p> <p>Parameters: - <code>top_artists</code>: List of top artist dictionaries</p>"},{"location":"api-reference/#load_alldata-dict-none","title":"<code>load_all(data: dict) -&gt; None</code>","text":"<p>Load all transformed data to BigQuery.</p> <p>Parameters: - <code>data</code>: Dictionary with all transformed data</p>"},{"location":"api-reference/#pipeline-module","title":"Pipeline Module","text":""},{"location":"api-reference/#etlpipeline-pipelinesetl_pipelinepy","title":"ETLPipeline (<code>pipelines/etl_pipeline.py</code>)","text":"<p>Main ETL pipeline orchestrator.</p>"},{"location":"api-reference/#methods_5","title":"Methods","text":""},{"location":"api-reference/#run-dict","title":"<code>run() -&gt; dict</code>","text":"<p>Execute the complete ETL pipeline.</p> <p>Returns: Dictionary with execution summary including: - <code>status</code>: \"success\" or \"error\" - <code>users</code>: Number of users loaded - <code>playlists</code>: Number of playlists loaded - <code>tracks</code>: Number of tracks loaded - <code>artists</code>: Number of artists loaded - <code>audio_features</code>: Number of audio features loaded - <code>recently_played</code>: Number of recently played records loaded - <code>top_tracks</code>: Number of top tracks loaded - <code>top_artists</code>: Number of top artists loaded</p>"},{"location":"api-reference/#utilities","title":"Utilities","text":""},{"location":"api-reference/#logger-srcutilsloggerpy","title":"Logger (<code>src/utils/logger.py</code>)","text":"<p>Centralized logging configuration.</p>"},{"location":"api-reference/#functions","title":"Functions","text":""},{"location":"api-reference/#setup_loggername-str-spotify_etl-logginglogger","title":"<code>setup_logger(name: str = \"spotify_etl\") -&gt; logging.Logger</code>","text":"<p>Set up and configure a logger instance.</p> <p>Parameters: - <code>name</code>: Name of the logger</p> <p>Returns: Configured logger instance</p>"},{"location":"api-reference/#validators-srcutilsvalidatorspy","title":"Validators (<code>src/utils/validators.py</code>)","text":"<p>Pydantic models for data validation.</p>"},{"location":"api-reference/#models","title":"Models","text":"<ul> <li><code>UserValidator</code>: Validates user data</li> <li><code>PlaylistValidator</code>: Validates playlist data</li> <li><code>TrackValidator</code>: Validates track data</li> <li><code>AudioFeaturesValidator</code>: Validates audio features</li> <li><code>ArtistValidator</code>: Validates artist data</li> </ul>"},{"location":"architecture/","title":"Architecture","text":"<p>This document describes the architecture and design of the Spotify ETL Pipeline.</p>"},{"location":"architecture/#system-overview","title":"System Overview","text":"<p>The pipeline follows a traditional ETL (Extract, Transform, Load) architecture with the following components:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Spotify   \u2502\u2500\u2500\u2500\u2500\u2500\u25b6\u2502   Extract    \u2502\u2500\u2500\u2500\u2500\u2500\u25b6\u2502 Transform   \u2502\u2500\u2500\u2500\u2500\u2500\u25b6\u2502    Load      \u2502\n\u2502    API     \u2502      \u2502              \u2502      \u2502              \u2502      \u2502  BigQuery    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                                      \u2502\n                                                      \u25bc\n                                            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                            \u2502  Streamlit   \u2502\n                                            \u2502  Dashboard   \u2502\n                                            \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/#components","title":"Components","text":""},{"location":"architecture/#1-spotify-client-srcspotifyclientpy","title":"1. Spotify Client (<code>src/spotify/client.py</code>)","text":"<p>Responsibility: Authentication and API communication</p> <ul> <li>Handles OAuth2 authentication flow</li> <li>Manages token refresh and caching</li> <li>Implements rate limiting and retry logic</li> <li>Provides methods for all Spotify API endpoints</li> </ul> <p>Key Features: - Automatic token refresh - Exponential backoff for rate limits - Error handling and retries</p>"},{"location":"architecture/#2-data-extractor-srcspotifyextractorpy","title":"2. Data Extractor (<code>src/spotify/extractor.py</code>)","text":"<p>Responsibility: Extract data from Spotify API</p> <ul> <li>Extracts user profile information</li> <li>Fetches playlists with pagination</li> <li>Retrieves tracks and audio features</li> <li>Gets artist information</li> <li>Fetches recently played tracks</li> <li>Retrieves top tracks and artists</li> </ul> <p>Extraction Limits (for cost optimization): - Maximum 20 playlists - Maximum 100 tracks per playlist - Last 50 recently played tracks - Top 20 tracks/artists per time range</p>"},{"location":"architecture/#3-data-transformer-srcspotifytransformerspy","title":"3. Data Transformer (<code>src/spotify/transformers.py</code>)","text":"<p>Responsibility: Transform and validate data</p> <ul> <li>Normalizes data from different endpoints</li> <li>Validates data using Pydantic models</li> <li>Enriches data with timestamps</li> <li>Cleans and standardizes formats</li> </ul> <p>Validation Models: - <code>UserModel</code> - User profile data - <code>PlaylistModel</code> - Playlist information - <code>TrackModel</code> - Track details - <code>AudioFeaturesModel</code> - Audio features - <code>ArtistModel</code> - Artist information</p>"},{"location":"architecture/#4-bigquery-client-srcbigqueryclientpy","title":"4. BigQuery Client (<code>src/bigquery/client.py</code>)","text":"<p>Responsibility: BigQuery connection and dataset management</p> <ul> <li>Manages BigQuery client connection</li> <li>Ensures dataset exists</li> <li>Creates tables with schemas</li> <li>Handles table operations</li> </ul>"},{"location":"architecture/#5-bigquery-loader-srcbigqueryloaderpy","title":"5. BigQuery Loader (<code>src/bigquery/loader.py</code>)","text":"<p>Responsibility: Load data into BigQuery</p> <ul> <li>Implements upsert strategy (merge)</li> <li>Handles incremental loading</li> <li>Manages batch inserts</li> <li>Deduplicates data</li> </ul> <p>Loading Strategy: - Upsert for existing records - Insert for new records - Batch processing for efficiency</p>"},{"location":"architecture/#6-etl-pipeline-pipelinesetl_pipelinepy","title":"6. ETL Pipeline (<code>pipelines/etl_pipeline.py</code>)","text":"<p>Responsibility: Orchestrate the complete ETL process</p> <ul> <li>Coordinates extraction, transformation, and loading</li> <li>Handles errors and logging</li> <li>Provides execution summary</li> </ul>"},{"location":"architecture/#data-flow","title":"Data Flow","text":""},{"location":"architecture/#extraction-phase","title":"Extraction Phase","text":"<ol> <li>Authenticate with Spotify API</li> <li>Extract user profile</li> <li>Extract user playlists (limited to 20)</li> <li>For each playlist, extract tracks (limited to 100 per playlist)</li> <li>Extract audio features for unique tracks</li> <li>Extract artist information for unique artists</li> <li>Extract recently played tracks (last 50)</li> <li>Extract top tracks and artists (top 20 each)</li> </ol>"},{"location":"architecture/#transformation-phase","title":"Transformation Phase","text":"<ol> <li>Normalize data structures</li> <li>Validate data with Pydantic models</li> <li>Add extraction timestamps</li> <li>Clean and standardize formats</li> <li>Prepare data for BigQuery schemas</li> </ol>"},{"location":"architecture/#loading-phase","title":"Loading Phase","text":"<ol> <li>Connect to BigQuery</li> <li>For each table:</li> <li>Check if records exist</li> <li>Perform upsert (merge) operation</li> <li>Insert new records</li> <li>Update existing records</li> </ol>"},{"location":"architecture/#database-schema","title":"Database Schema","text":""},{"location":"architecture/#tables","title":"Tables","text":"<ol> <li>users - User profile information</li> <li>playlists - Playlist metadata</li> <li>tracks - Track information</li> <li>track_audio_features - Audio analysis features</li> <li>artists - Artist information</li> <li>playlist_tracks - Many-to-many relationship</li> <li>recently_played - Playback history (partitioned by date)</li> <li>top_tracks - User's top tracks by time range (partitioned)</li> <li>top_artists - User's top artists by time range (partitioned)</li> </ol>"},{"location":"architecture/#partitioning-strategy","title":"Partitioning Strategy","text":"<ul> <li>recently_played: Partitioned by <code>played_at</code> (date)</li> <li>top_tracks: Partitioned by <code>extracted_at</code> (date)</li> <li>top_artists: Partitioned by <code>extracted_at</code> (date)</li> </ul> <p>This allows efficient querying of time-series data and helps with data retention policies.</p>"},{"location":"architecture/#cost-optimization","title":"Cost Optimization","text":""},{"location":"architecture/#storage-optimization","title":"Storage Optimization","text":"<ul> <li>Use appropriate data types (STRING instead of TEXT)</li> <li>Partition only time-series tables</li> <li>Implement data retention policies (90 days for recently_played)</li> </ul>"},{"location":"architecture/#query-optimization","title":"Query Optimization","text":"<ul> <li>Limit extraction to necessary data only</li> <li>Use incremental loading (only new/changed data)</li> <li>Implement caching in Streamlit dashboard</li> <li>Use LIMIT clauses in queries</li> </ul>"},{"location":"architecture/#free-tier-limits","title":"Free Tier Limits","text":"<ul> <li>Storage: 10 GB/month (free)</li> <li>Queries: 1 TB/month (free)</li> </ul> <p>The pipeline is designed to stay well within these limits.</p>"},{"location":"architecture/#error-handling","title":"Error Handling","text":""},{"location":"architecture/#retry-logic","title":"Retry Logic","text":"<ul> <li>Automatic retry with exponential backoff for rate limits</li> <li>Token refresh on authentication errors</li> <li>Maximum 3 retries for transient errors</li> </ul>"},{"location":"architecture/#logging","title":"Logging","text":"<ul> <li>Centralized logging configuration</li> <li>Different log levels (DEBUG, INFO, WARNING, ERROR)</li> <li>File logging in production environment</li> </ul>"},{"location":"architecture/#security","title":"Security","text":""},{"location":"architecture/#credentials-management","title":"Credentials Management","text":"<ul> <li>Environment variables for sensitive data</li> <li><code>.env</code> file (not committed to git)</li> <li>Service account JSON for GCP (stored securely)</li> </ul>"},{"location":"architecture/#oauth2-flow","title":"OAuth2 Flow","text":"<ul> <li>Secure token storage in <code>.spotify_cache</code></li> <li>Automatic token refresh</li> <li>No hardcoded credentials</li> </ul>"},{"location":"architecture/#scalability-considerations","title":"Scalability Considerations","text":""},{"location":"architecture/#current-design","title":"Current Design","text":"<ul> <li>Single-user extraction</li> <li>Manual execution</li> <li>Suitable for personal data analysis</li> </ul>"},{"location":"architecture/#future-enhancements","title":"Future Enhancements","text":"<ul> <li>Multi-user support</li> <li>Scheduled execution (cron, Cloud Scheduler)</li> <li>Parallel processing for large datasets</li> <li>Streaming data updates</li> </ul>"},{"location":"architecture/#monitoring","title":"Monitoring","text":""},{"location":"architecture/#cost-monitoring","title":"Cost Monitoring","text":"<ul> <li>Script to check BigQuery usage</li> <li>Alerts for approaching free tier limits</li> <li>Monthly projections</li> </ul>"},{"location":"architecture/#pipeline-monitoring","title":"Pipeline Monitoring","text":"<ul> <li>Detailed logging at each step</li> <li>Execution summaries</li> <li>Error tracking</li> </ul>"},{"location":"architecture/#testing-strategy","title":"Testing Strategy","text":""},{"location":"architecture/#unit-tests","title":"Unit Tests","text":"<ul> <li>Test each component independently</li> <li>Mock external APIs (Spotify, BigQuery)</li> <li>Validate data transformations</li> </ul>"},{"location":"architecture/#integration-tests","title":"Integration Tests","text":"<ul> <li>End-to-end pipeline testing</li> <li>Test with test data</li> <li>Verify BigQuery schemas</li> </ul>"},{"location":"deployment/","title":"Deployment Guide","text":"<p>This guide covers deployment, cost monitoring, and optimization strategies for the Spotify ETL Pipeline.</p>"},{"location":"deployment/#production-setup","title":"Production Setup","text":""},{"location":"deployment/#environment-configuration","title":"Environment Configuration","text":"<ol> <li> <p>Set Environment Variables:    <pre><code>export SPOTIFY_CLIENT_ID=\"your_client_id\"\nexport SPOTIFY_CLIENT_SECRET=\"your_client_secret\"\nexport GOOGLE_APPLICATION_CREDENTIALS=\"/path/to/key.json\"\nexport BIGQUERY_PROJECT_ID=\"your-project-id\"\nexport ENVIRONMENT=\"production\"\nexport LOG_LEVEL=\"INFO\"\n</code></pre></p> </li> <li> <p>Secure Credentials:</p> </li> <li>Never commit <code>.env</code> file to version control</li> <li>Use secret management services in production</li> <li>Rotate credentials regularly</li> </ol>"},{"location":"deployment/#bigquery-setup","title":"BigQuery Setup","text":"<ol> <li> <p>Create Dataset:    <pre><code>python scripts/setup_bigquery.py\n</code></pre></p> </li> <li> <p>Verify Tables:</p> </li> <li>Check that all tables are created</li> <li>Verify schemas are correct</li> <li>Confirm partitioning is set up</li> </ol>"},{"location":"deployment/#scheduled-execution","title":"Scheduled Execution","text":""},{"location":"deployment/#using-cron-linuxmac","title":"Using Cron (Linux/Mac)","text":"<pre><code># Edit crontab\ncrontab -e\n\n# Run ETL daily at 2 AM\n0 2 * * * cd /path/to/Spotify-api &amp;&amp; /path/to/venv/bin/python scripts/run_etl.py &gt;&gt; logs/cron.log 2&gt;&amp;1\n</code></pre>"},{"location":"deployment/#using-cloud-scheduler-gcp","title":"Using Cloud Scheduler (GCP)","text":"<ol> <li>Create Cloud Function or Cloud Run service</li> <li>Schedule with Cloud Scheduler</li> <li>Set appropriate timezone and frequency</li> </ol>"},{"location":"deployment/#cost-monitoring","title":"Cost Monitoring","text":""},{"location":"deployment/#bigquery-free-tier","title":"BigQuery Free Tier","text":"<p>BigQuery offers a free tier with:</p> <ul> <li>10 GB of storage per month</li> <li>1 TB of queries per month</li> <li>1 GB of streaming inserts per month</li> </ul>"},{"location":"deployment/#monitoring-script","title":"Monitoring Script","text":"<p>Run the cost monitoring script regularly:</p> <pre><code>python scripts/monitor_costs.py\n</code></pre> <p>This script shows: - Current storage usage - Query usage for last 30 days - Monthly projections - Warnings if approaching limits</p>"},{"location":"deployment/#setting-up-budget-alerts-in-gcp","title":"Setting Up Budget Alerts in GCP","text":"<ol> <li>Navigate to Billing:</li> <li>Go to GCP Console</li> <li>Select your project</li> <li> <p>Go to Billing \u2192 Budgets &amp; alerts</p> </li> <li> <p>Create Budget:</p> </li> <li>Click \"Create Budget\"</li> <li>Set amount: $1 USD/month</li> <li>Select your billing account</li> <li> <p>Choose project scope</p> </li> <li> <p>Configure Alerts:</p> </li> <li>Add alert at 50% of budget</li> <li>Add alert at 90% of budget</li> <li>Add alert at 100% of budget</li> <li> <p>Add email notifications</p> </li> <li> <p>Save Budget:</p> </li> <li>Review settings</li> <li>Create budget</li> </ol>"},{"location":"deployment/#monitoring-bigquery-usage","title":"Monitoring BigQuery Usage","text":""},{"location":"deployment/#storage-usage","title":"Storage Usage","text":"<ol> <li>Go to BigQuery Console</li> <li>Select your dataset</li> <li>View table sizes in the UI</li> <li>Check \"Storage\" tab for total usage</li> </ol>"},{"location":"deployment/#query-usage","title":"Query Usage","text":"<ol> <li>Go to BigQuery Console</li> <li>Click \"Job history\"</li> <li>Filter by date range</li> <li>View \"Bytes processed\" column</li> </ol>"},{"location":"deployment/#using-information-schema","title":"Using Information Schema","text":"<p>Query usage can be checked with:</p> <pre><code>SELECT\n  SUM(total_bytes_processed) / POW(1024, 4) as total_tb\nFROM\n  `project-id.region-us.INFORMATION_SCHEMA.JOBS_BY_PROJECT`\nWHERE\n  creation_time &gt;= TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 30 DAY)\n  AND job_type = 'QUERY'\n</code></pre>"},{"location":"deployment/#cost-optimization-strategies","title":"Cost Optimization Strategies","text":""},{"location":"deployment/#storage-optimization","title":"Storage Optimization","text":"<ol> <li>Data Retention Policies:</li> <li>Implement retention for time-series data</li> <li>Delete old <code>recently_played</code> records (&gt;90 days)</li> <li> <p>Archive or delete old <code>top_tracks</code>/<code>top_artists</code> snapshots</p> </li> <li> <p>Efficient Data Types:</p> </li> <li>Use STRING instead of TEXT</li> <li>Use INT64 instead of FLOAT where possible</li> <li> <p>Avoid storing redundant data</p> </li> <li> <p>Partitioning:</p> </li> <li>Only partition time-series tables</li> <li>Use date partitioning for <code>recently_played</code></li> <li>Partition <code>top_tracks</code> and <code>top_artists</code> by <code>extracted_at</code></li> </ol>"},{"location":"deployment/#query-optimization","title":"Query Optimization","text":"<ol> <li>Limit Extraction:</li> <li>Extract only necessary data</li> <li>Use extraction limits (MAX_PLAYLISTS, etc.)</li> <li> <p>Avoid full table scans</p> </li> <li> <p>Incremental Loading:</p> </li> <li>Only load new/changed data</li> <li>Use timestamps to track last extraction</li> <li> <p>Implement checkpoint system</p> </li> <li> <p>Streamlit Caching:</p> </li> <li>Use <code>@st.cache_data</code> for queries</li> <li>Set appropriate TTL</li> <li> <p>Cache aggregated results</p> </li> <li> <p>Query Best Practices:</p> </li> <li>Always use LIMIT clauses</li> <li>Filter early with WHERE</li> <li>Use SELECT specific columns</li> <li>Avoid SELECT *</li> </ol>"},{"location":"deployment/#example-data-retention-script","title":"Example: Data Retention Script","text":"<pre><code>from google.cloud import bigquery\n\nclient = bigquery.Client()\ndataset_id = \"spotify_data\"\ntable_id = \"recently_played\"\n\n# Delete records older than 90 days\nquery = f\"\"\"\nDELETE FROM `{client.project}.{dataset_id}.{table_id}`\nWHERE played_at &lt; TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 90 DAY)\n\"\"\"\n\njob = client.query(query)\njob.result()\n</code></pre>"},{"location":"deployment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"deployment/#high-storage-usage","title":"High Storage Usage","text":"<p>Symptoms: Storage approaching 10 GB limit</p> <p>Solutions: 1. Implement data retention policies 2. Review table sizes 3. Delete unnecessary historical data 4. Archive old data to Cloud Storage</p>"},{"location":"deployment/#high-query-usage","title":"High Query Usage","text":"<p>Symptoms: Query usage approaching 1 TB limit</p> <p>Solutions: 1. Review Streamlit dashboard queries 2. Add more aggressive caching 3. Optimize queries (add LIMIT, WHERE clauses) 4. Reduce dashboard refresh frequency 5. Limit data extraction frequency</p>"},{"location":"deployment/#authentication-issues","title":"Authentication Issues","text":"<p>Symptoms: 401 Unauthorized errors</p> <p>Solutions: 1. Check token expiration 2. Re-authenticate with Spotify 3. Verify credentials in <code>.env</code> 4. Check service account permissions</p>"},{"location":"deployment/#rate-limiting","title":"Rate Limiting","text":"<p>Symptoms: 429 Too Many Requests errors</p> <p>Solutions: 1. Reduce extraction frequency 2. Implement longer delays between requests 3. Batch requests more efficiently 4. Check rate limit headers</p>"},{"location":"deployment/#best-practices","title":"Best Practices","text":"<ol> <li>Regular Monitoring: Run <code>monitor_costs.py</code> weekly</li> <li>Set Alerts: Configure GCP budget alerts</li> <li>Review Usage: Check BigQuery console monthly</li> <li>Optimize Queries: Review and optimize slow queries</li> <li>Data Retention: Implement and maintain retention policies</li> <li>Documentation: Keep deployment notes updated</li> </ol>"},{"location":"deployment/#scaling-considerations","title":"Scaling Considerations","text":""},{"location":"deployment/#current-limitations","title":"Current Limitations","text":"<ul> <li>Single user extraction</li> <li>Manual or scheduled execution</li> <li>Suitable for personal use</li> </ul>"},{"location":"deployment/#future-scaling","title":"Future Scaling","text":"<p>If you need to scale:</p> <ol> <li>Multi-User Support:</li> <li>Store tokens per user</li> <li>Track extraction per user</li> <li> <p>Partition data by user_id</p> </li> <li> <p>Increased Volume:</p> </li> <li>Consider paid BigQuery tier</li> <li>Implement more aggressive caching</li> <li> <p>Use Cloud Functions for processing</p> </li> <li> <p>Real-Time Updates:</p> </li> <li>Use streaming inserts</li> <li>Implement change data capture</li> <li>Use Pub/Sub for events</li> </ol>"},{"location":"deployment/#support","title":"Support","text":"<p>For issues or questions:</p> <ol> <li>Check logs in <code>logs/spotify_etl.log</code></li> <li>Review error messages</li> <li>Check GCP console for BigQuery errors</li> <li>Review Spotify API status</li> </ol>"},{"location":"deployment/#references","title":"References","text":"<ul> <li>BigQuery Pricing</li> <li>BigQuery Free Tier</li> <li>GCP Budget Alerts</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide will help you set up and run the Spotify ETL Pipeline from scratch.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<p>Before you begin, ensure you have:</p> <ol> <li>Python 3.11 or higher installed</li> <li>Spotify Developer Account with an app created</li> <li>Google Cloud Platform account with BigQuery enabled</li> <li>GCP Service Account with BigQuery permissions</li> </ol>"},{"location":"getting-started/#step-1-clone-and-setup-project","title":"Step 1: Clone and Setup Project","text":"<pre><code># Clone the repository\ngit clone &lt;repository-url&gt;\ncd Spotify-api\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n\n# Install dependencies\npip install -r requirements.txt\npip install -r requirements-dev.txt  # For development\n</code></pre>"},{"location":"getting-started/#step-2-configure-spotify-api","title":"Step 2: Configure Spotify API","text":"<ol> <li>Go to Spotify Developer Dashboard</li> <li>Create a new app</li> <li>Note your Client ID and Client Secret</li> <li>Add redirect URI: <code>http://localhost:8888/callback</code></li> <li>Select Web API in the API/SDKs section</li> </ol>"},{"location":"getting-started/#step-3-configure-google-cloud-platform","title":"Step 3: Configure Google Cloud Platform","text":"<ol> <li>Create a new GCP project or use an existing one</li> <li>Enable BigQuery API</li> <li>Create a Service Account:</li> <li>Go to IAM &amp; Admin \u2192 Service Accounts</li> <li>Create new service account</li> <li>Grant \"BigQuery Data Editor\" and \"BigQuery Job User\" roles</li> <li>Create and download JSON key file</li> </ol>"},{"location":"getting-started/#step-4-configure-environment-variables","title":"Step 4: Configure Environment Variables","text":"<pre><code># Copy example environment file\ncp .env.example .env\n\n# Edit .env with your credentials\n</code></pre> <p>Update <code>.env</code> with:</p> <pre><code># Spotify API\nSPOTIFY_CLIENT_ID=your_client_id_here\nSPOTIFY_CLIENT_SECRET=your_client_secret_here\nSPOTIFY_REDIRECT_URI=http://localhost:8888/callback\nSPOTIFY_SCOPE=user-read-recently-played,user-top-read,user-library-read,playlist-read-private\n\n# Google Cloud / BigQuery\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account-key.json\nBIGQUERY_PROJECT_ID=your-gcp-project-id\nBIGQUERY_DATASET_ID=spotify_data\n\n# Extraction Limits (optional - defaults shown)\nMAX_PLAYLISTS=20\nMAX_TRACKS_PER_PLAYLIST=100\nMAX_RECENTLY_PLAYED=50\nTOP_ITEMS_LIMIT=20\nMAX_AUDIO_FEATURES_BATCH=100\n\n# Application Configuration\nLOG_LEVEL=INFO\nENVIRONMENT=development\n</code></pre>"},{"location":"getting-started/#step-5-authenticate-with-spotify","title":"Step 5: Authenticate with Spotify","text":"<p>On first run, you'll need to authenticate with Spotify:</p> <ol> <li>Run any script that uses Spotify API (e.g., <code>python scripts/run_etl.py</code>)</li> <li>You'll see a URL in the console</li> <li>Open the URL in your browser</li> <li>Authorize the application</li> <li>You'll be redirected to <code>http://localhost:8888/callback</code></li> <li>Copy the full URL from your browser</li> <li>The token will be cached in <code>.spotify_cache</code> for future use</li> </ol>"},{"location":"getting-started/#step-6-setup-bigquery-tables","title":"Step 6: Setup BigQuery Tables","text":"<pre><code>python scripts/setup_bigquery.py\n</code></pre> <p>This will: - Create the BigQuery dataset (if it doesn't exist) - Create all required tables with proper schemas - Configure partitioning for time-series tables</p>"},{"location":"getting-started/#step-7-run-etl-pipeline","title":"Step 7: Run ETL Pipeline","text":"<pre><code>python scripts/run_etl.py\n</code></pre> <p>This will: 1. Extract data from Spotify API 2. Transform and validate the data 3. Load data into BigQuery</p>"},{"location":"getting-started/#step-8-launch-streamlit-dashboard","title":"Step 8: Launch Streamlit Dashboard","text":"<pre><code>streamlit run streamlit_app/main.py\n</code></pre> <p>Open your browser to <code>http://localhost:8501</code> to view the dashboard.</p>"},{"location":"getting-started/#step-9-monitor-costs-optional","title":"Step 9: Monitor Costs (Optional)","text":"<pre><code>python scripts/monitor_costs.py\n</code></pre> <p>This will show: - Current storage usage - Query usage for the last 30 days - Projections for monthly usage - Warnings if approaching free tier limits</p>"},{"location":"getting-started/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/#spotify-authentication-issues","title":"Spotify Authentication Issues","text":"<ul> <li>Ensure redirect URI matches exactly in Spotify app settings</li> <li>Clear <code>.spotify_cache</code> file and re-authenticate</li> <li>Check that scopes are correctly set</li> </ul>"},{"location":"getting-started/#bigquery-connection-issues","title":"BigQuery Connection Issues","text":"<ul> <li>Verify <code>GOOGLE_APPLICATION_CREDENTIALS</code> path is correct</li> <li>Ensure service account has proper permissions</li> <li>Check that BigQuery API is enabled in GCP</li> </ul>"},{"location":"getting-started/#import-errors","title":"Import Errors","text":"<ul> <li>Ensure virtual environment is activated</li> <li>Run <code>pip install -r requirements.txt</code> again</li> <li>Check Python version: <code>python --version</code> (should be 3.11+)</li> </ul>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Read the Architecture guide to understand the system design</li> <li>Check the API Reference for code documentation</li> <li>Review Deployment for production setup and cost monitoring</li> </ul>"},{"location":"spotify-api-guide/","title":"Spotify API Guide","text":"<p>This guide explains how to use the Spotify Web API endpoints in this project.</p>"},{"location":"spotify-api-guide/#authentication","title":"Authentication","text":"<p>The project uses OAuth2 authentication with the following flow:</p> <ol> <li>User authorizes the application</li> <li>Receive authorization code</li> <li>Exchange code for access token</li> <li>Use access token for API requests</li> <li>Refresh token when expired</li> </ol>"},{"location":"spotify-api-guide/#required-scopes","title":"Required Scopes","text":"<ul> <li><code>user-read-recently-played</code>: Read recently played tracks</li> <li><code>user-top-read</code>: Read user's top tracks and artists</li> <li><code>user-library-read</code>: Read user's saved tracks and albums</li> <li><code>playlist-read-private</code>: Read user's private playlists</li> </ul>"},{"location":"spotify-api-guide/#endpoints-used","title":"Endpoints Used","text":""},{"location":"spotify-api-guide/#user-profile","title":"User Profile","text":"<p>Endpoint: <code>GET /v1/me</code></p> <p>Usage: Get current user's profile information</p> <p>Response Fields: - <code>id</code>: User ID - <code>display_name</code>: Display name - <code>followers</code>: Followers count - <code>country</code>: Country code - <code>product</code>: Subscription type (free/premium)</p>"},{"location":"spotify-api-guide/#user-playlists","title":"User Playlists","text":"<p>Endpoint: <code>GET /v1/users/{user_id}/playlists</code></p> <p>Usage: Get user's playlists</p> <p>Pagination: Supports <code>limit</code> and <code>offset</code> parameters</p> <p>Response Fields: - <code>id</code>: Playlist ID - <code>name</code>: Playlist name - <code>description</code>: Playlist description - <code>owner</code>: Owner information - <code>public</code>: Public/private status - <code>collaborative</code>: Collaborative status - <code>followers</code>: Followers count - <code>tracks</code>: Tracks information</p>"},{"location":"spotify-api-guide/#playlist-tracks","title":"Playlist Tracks","text":"<p>Endpoint: <code>GET /v1/playlists/{playlist_id}/tracks</code></p> <p>Usage: Get tracks from a playlist</p> <p>Pagination: Supports <code>limit</code> and <code>offset</code> parameters</p> <p>Response Fields: - <code>track</code>: Track object - <code>added_at</code>: When track was added - <code>added_by</code>: User who added the track</p>"},{"location":"spotify-api-guide/#track-audio-features","title":"Track Audio Features","text":"<p>Endpoint: <code>GET /v1/audio-features</code></p> <p>Usage: Get audio features for multiple tracks</p> <p>Limits: Maximum 100 track IDs per request</p> <p>Response Fields: - <code>danceability</code>: 0.0-1.0 - <code>energy</code>: 0.0-1.0 - <code>key</code>: 0-11 (musical key) - <code>loudness</code>: dB value - <code>mode</code>: 0 (minor) or 1 (major) - <code>speechiness</code>: 0.0-1.0 - <code>acousticness</code>: 0.0-1.0 - <code>instrumentalness</code>: 0.0-1.0 - <code>liveness</code>: 0.0-1.0 - <code>valence</code>: 0.0-1.0 (positivity) - <code>tempo</code>: BPM - <code>time_signature</code>: 3-7</p>"},{"location":"spotify-api-guide/#artist-information","title":"Artist Information","text":"<p>Endpoint: <code>GET /v1/artists</code></p> <p>Usage: Get information for multiple artists</p> <p>Limits: Maximum 50 artist IDs per request</p> <p>Response Fields: - <code>id</code>: Artist ID - <code>name</code>: Artist name - <code>genres</code>: List of genres - <code>popularity</code>: 0-100 - <code>followers</code>: Followers count - <code>external_urls</code>: Spotify URLs</p>"},{"location":"spotify-api-guide/#recently-played-tracks","title":"Recently Played Tracks","text":"<p>Endpoint: <code>GET /v1/me/player/recently-played</code></p> <p>Usage: Get recently played tracks</p> <p>Limits: Maximum 50 tracks per request</p> <p>Response Fields: - <code>track</code>: Track object - <code>played_at</code>: Timestamp when played - <code>context</code>: Playback context</p>"},{"location":"spotify-api-guide/#top-tracks","title":"Top Tracks","text":"<p>Endpoint: <code>GET /v1/me/top/tracks</code></p> <p>Usage: Get user's top tracks</p> <p>Parameters: - <code>time_range</code>: <code>short_term</code> (4 weeks), <code>medium_term</code> (6 months), <code>long_term</code> (all time) - <code>limit</code>: Maximum 50</p> <p>Response Fields: - <code>id</code>: Track ID - <code>name</code>: Track name - <code>artists</code>: Artist information - <code>popularity</code>: Popularity score - <code>album</code>: Album information</p>"},{"location":"spotify-api-guide/#top-artists","title":"Top Artists","text":"<p>Endpoint: <code>GET /v1/me/top/artists</code></p> <p>Usage: Get user's top artists</p> <p>Parameters: - <code>time_range</code>: <code>short_term</code>, <code>medium_term</code>, <code>long_term</code> - <code>limit</code>: Maximum 50</p> <p>Response Fields: - <code>id</code>: Artist ID - <code>name</code>: Artist name - <code>genres</code>: Genres - <code>popularity</code>: Popularity score - <code>followers</code>: Followers count</p>"},{"location":"spotify-api-guide/#rate-limiting","title":"Rate Limiting","text":"<p>Spotify API has rate limits:</p> <ul> <li>30 requests per second per application</li> <li>Rate limit headers in responses:</li> <li><code>X-RateLimit-Limit</code>: Requests allowed</li> <li><code>X-RateLimit-Remaining</code>: Requests remaining</li> <li><code>Retry-After</code>: Seconds to wait if rate limited</li> </ul> <p>The client automatically handles rate limiting with exponential backoff.</p>"},{"location":"spotify-api-guide/#error-handling","title":"Error Handling","text":""},{"location":"spotify-api-guide/#common-error-codes","title":"Common Error Codes","text":"<ul> <li><code>400 Bad Request</code>: Invalid parameters</li> <li><code>401 Unauthorized</code>: Invalid or expired token</li> <li><code>403 Forbidden</code>: Insufficient permissions</li> <li><code>404 Not Found</code>: Resource doesn't exist</li> <li><code>429 Too Many Requests</code>: Rate limit exceeded</li> <li><code>500 Internal Server Error</code>: Spotify server error</li> </ul>"},{"location":"spotify-api-guide/#error-response-format","title":"Error Response Format","text":"<pre><code>{\n  \"error\": {\n    \"status\": 401,\n    \"message\": \"Invalid access token\"\n  }\n}\n</code></pre>"},{"location":"spotify-api-guide/#best-practices","title":"Best Practices","text":"<ol> <li>Cache Tokens: Store tokens securely and refresh before expiration</li> <li>Handle Pagination: Always check for <code>next</code> field in paginated responses</li> <li>Batch Requests: Use batch endpoints when available (audio features, artists)</li> <li>Respect Rate Limits: Implement exponential backoff</li> <li>Error Handling: Handle all error cases gracefully</li> <li>Data Validation: Validate all API responses before processing</li> </ol>"},{"location":"spotify-api-guide/#data-extraction-limits","title":"Data Extraction Limits","text":"<p>To optimize costs and stay within free tier, the project implements limits:</p> <ul> <li>Playlists: Maximum 20 playlists</li> <li>Tracks per Playlist: Maximum 100 tracks</li> <li>Recently Played: Last 50 tracks</li> <li>Top Items: Top 20 tracks/artists per time range</li> <li>Audio Features: Batched in groups of 100</li> </ul> <p>These limits can be adjusted in <code>.env</code> file.</p>"},{"location":"spotify-api-guide/#references","title":"References","text":"<ul> <li>Spotify Web API Documentation</li> <li>Spotify Web API Reference</li> <li>Authorization Guide</li> </ul>"}]}